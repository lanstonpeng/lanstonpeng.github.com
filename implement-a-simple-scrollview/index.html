<!DOCTYPE html>
<html>

<!-- Mirrored from localhost:2368/implement-a-simple-scrollview/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 06 Dec 2015 02:44:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Understanding Bounds and Frame by implementing a simple ScrollView</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Understanding Bounds and Frame by implementing a simple ScrollView">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="Understanding Bounds and Frame by implementing a simple ScrollView">
    <meta property="og:description" content="">

    <link rel="icon" type="image/png" href="../assets/images/favicon.png" />
    <link href="../assets/images/favicon.png" rel="shortcut icon" type="image/png">
    <link href="../apple-touch-icon-precomposed.png/index.html" rel="apple-touch-icon">

    <link rel="stylesheet" type="text/css" href="../assets/css/vno86b5.css?v=8e02a3de55" />
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../assets/css/tomorrow86b5.css?v=8e02a3de55">
    
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Lanston Peng's ideas" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Understanding Bounds and Frame by implementing a simple ScrollView" />
    <meta property="og:description" content="As we use UIView so commonly in our application,I&#x27;ve been confused about the concept of the bounds property  the docs descript it as   The bounds rectangle, which describes the view’s location and size in its own coordinate system...." />
    <meta property="og:url" content="index.html" />
    <meta property="article:published_time" content="2014-04-26T23:38:49.000Z" />
    <meta property="article:modified_time" content="2014-04-26T23:38:49.000Z" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Understanding Bounds and Frame by implementing a simple ScrollView" />
    <meta name="twitter:description" content="As we use UIView so commonly in our application,I&#x27;ve been confused about the concept of the bounds property  the docs descript it as   The bounds rectangle, which describes the view’s location and size in its own coordinate system...." />
    <meta name="twitter:url" content="index.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Lanston Peng's ideas",
    "author": {
        "@type": "Person",
        "name": "lanstonpeng",
        "url": "http://localhost:2368/author/lanstonpeng",
        "sameAs": null,
        "description": null
    },
    "headline": "Understanding Bounds and Frame by implementing a simple ScrollView",
    "url": "http://localhost:2368/implement-a-simple-scrollview/",
    "datePublished": "2014-04-26T23:38:49.000Z",
    "dateModified": "2014-04-26T23:38:49.000Z",
    "description": "As we use UIView so commonly in our application,I&#x27;ve been confused about the concept of the bounds property  the docs descript it as   The bounds rectangle, which describes the view’s location and size in its own coordinate system...."
}
    </script>

    <meta name="generator" content="Ghost 0.7" />
    <link rel="alternate" type="application/rss+xml" title="Lanston Peng&#x27;s ideas" href="../rss/index.html" />

</head>
<body class="post-template no-js">

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>

    <header class="panel-cover panel-cover--collapsed" style="background-image: url(../content/images/2015/12/John-William-Waterhouse-Hylas-and-the-Nymphs.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <h1 class="panel-cover__title panel-title"><a href="../index.html" title="前往 Lanston Peng&#x27;s ideas 的主页">Lanston Peng&#x27;s ideas</a></h1>
        <span class="panel-cover__subtitle panel-subtitle"></span>
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">能不断品尝那无限的美好作品
做一个有趣,简单且随和的人</p>
        <!--
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        -->

        <div class="navigation-wrapper">
          <div>
          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="../index.html#blog" title="访问博客" class="blog-button">博客</a></li>
              <li class="navigation__item"><a href="http://douban.com/people/lanstonpeng" target="_blank" title="我的豆瓣">豆瓣</a></li>
              <!--
              <li class="navigation__item"><a href="" title="了解更多关于我">关于</a></li>
              -->
            </ul>
          </nav>
          </div>
          <div>
          <nav class="cover-navigation navigation--social">
  <ul class="navigation">


  <!-- 豆瓣 
  <li class="navigation__item">
    <a href="http://www.douban.com/people/lanstonpeng/" title="诚实的奸商" target="_blank">
      <i class='social fa fa-facebook'></i>
      <span class="label">豆瓣</span>
    </a>
  </li>
  -->

  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/lanstonpeng" title="Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>

  <!-- Twitter -->
  <li class="navigation__item">
    <a href="http://twitter.com/lanstonpeng" title="@lanstonpeng" target="_blank">
      <i class='social fa fa-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>
  
  <!-- RSS -->
  <li class="navigation__item">
    <a href="../rss/index.html" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:lanstonpeng@gmail.com" title="邮件联系我">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>

  </ul>
</nav>
          </div>
        </div>

      </div>

    </div>

    <div class="panel-cover--overlay cover-purple"></div>
  </div>
</header>

    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            

  <article class="post-container post-container--single">

    <header class="post-header">
      <div class="post-meta">
        <time datetime="27 Apr 2014" class="post-meta__date date">27 Apr 2014</time> &#8226; <span class="post-meta__tags tags"></span>
        <!--<span class="post-meta__author author"><img src="" alt="profile image for lanstonpeng" class="avatar post-meta__avatar" /> by lanstonpeng</span>-->
      </div>
      <h1 class="post-title">Understanding Bounds and Frame by implementing a simple ScrollView</h1>
    </header>

    <section class="post">
      <p>As we use UIView so commonly in our application,I've been confused about the concept of the <code>bounds</code> property <br />
the docs descript it as</p>

<blockquote>
  <p>The bounds rectangle, which describes the view’s location and size in its own coordinate system.On the screen, the bounds rectangle represents the same visible portion of the view as its frame rectangle. By default, the origin of the bounds rectangle is set to (0, 0) but you can change this value to display different portions of the view</p>
  
  <p>The default bounds origin is (0,0) and the size is the same as the frame rectangle’s size.</p>
</blockquote>

<p>And let's look at the <code>frame</code> property  </p>

<blockquote>
  <p>The frame rectangle, which describes the view’s location and size in its superview’s coordinate system</p>
</blockquote>

<p>The term <strong>own coordinate system</strong> really makes me felling uncomfortable at the first time <br />
Another problem confuses me is that <strong>Why existing bounds and frame,wouldn't it be simple if there's only one(say that there's just <code>frame</code> ,no <code>bounds</code>)</strong></p>

<p>So,if you have the same question spinning around in your head ,let's try implementing a simple <strong>UIScrollView</strong> for better understanding of <code>bounds</code> and <code>frame</code> <br />
And our lovely scroll view will be look like this..(How simple is that) <br />
<img src="http://lanstonpeng.github.io/assets/LScroll.gif" alt="youku" title="" /> </p>

<p><code>LScrollView</code> is just a simple <code>UIView</code></p>

<pre>
@interface LScrollView : UIView
@end
...

LScrollView* lScrollView = [[LScrollView alloc]initWithFrame:CGRectMake(0, 0, 320, 300)];
lScrollView.backgroundColor = [UIColor orangeColor];

</pre>

<p>And we may have to do something in the <code>touchesMoved</code> event,assuming that the only concept is <code>frame</code> ,no <code>bounds</code> <br />
everytime we pan the <code>LScrollView</code> we may have to change every subviews' frames  </p>

<pre>
    NSArray* subviews = [self subviews];
    UITouch* touch = [touches anyObject];
    //get the current touch point
    CGPoint pt = [touch locationInView:self];
    //get the last touch point
    _lastPoint = [touch previousLocationInView:self];
    _delta = pt.x - _lastPoint.x;
    for(UIView* view in subviews)
    {
        [view setFrame:CGRectMake(view.frame.origin.x + _delta, view.frame.origin.y, view.frame.size.width, view.frame.size.height)];
    }
</pre>

<p>Everything looks fine no matter "how many" subviews we have in our <code>LScrollView</code></p>

<p>We iterate every subview and alter the frame's origin,there's a performance issue here, <br />
Ok,Let's leave this and see how <strong>bounds</strong> works <br />
by defining <em>own coordinate system</em> means how subviews' coordinate system bases on <br />
for example: <br />
the <strong>bounds.origin</strong> of super view is <code>{0,0}</code> <br />
the <strong>frame.origin</strong> of child view is <code>{10,10}</code>  </p>

<pre>
bounds.origin                               
{0,0}                                       
  +----------------------------------------+
  |                                        |
  |                                        |
  |      frame.origin                      |
  |      +-------------------------+       |
  |      |{10,10}                  |       |
  |      |                         |       |
  |      |                         |       |
  |      |                         |       |
  |      |                         |       |
  |      +-------------------------+       |
  |                                        |
  |                                        |
  +----------------------------------------+
</pre>

<p>the <strong>final position</strong> of the child view is <code>{10,10}</code> <br />
result from <br />
<code>{child.frame.origin.x - super.bounds.origin.x,child.frame.origin.y - super.bounds.origin.y }</code>  </p>

<p>if the <strong>bounds.origin</strong> of the super view is <code>{-10,-10}</code>  </p>

<pre>
bounds.origin                               
{-10,-10}                                   
  +--+-------------------------------------+
  |                                        |
  |                                        |
  |      frame.origin                      |
  |      +-------------------------+       |
  |      |{10,10}                  |       |
  |      |                         |       |
  |      |                         |       |
  |      |                         |       |
  |      |                         |       |
  |      +-------------------------+       |
  |                                        |
  |                                        |
  +----------------------------------------+
</pre>

<p>the <strong>final position</strong> of the child view is <code>{20,20}</code> <br />
result from <br />
<code>{child.frame.origin.x - super.bounds.origin.x,child.frame.origin.y - super.bounds.origin.y }</code> <br />
So,we use the concept of <em>bounds</em> to reimplement our scrollView again  </p>

<pre>
    UITouch* touch = [touches anyObject];
    CGPoint pt = [touch locationInView:self];
    _offsetPoint = self.bounds.origin;
    _lastPoint = [touch previousLocationInView:self];
    if( pt.x - _lastPoint.x == 0){
        return;
    }
    //paning right
    if(pt.x - _lastPoint.x >0 ){
        _isRight = YES;
        _delta = pt.x - _lastPoint.x;
        _offsetPoint.x -= _delta;
    }
    //paning left
    else{
        _delta = _lastPoint.x - pt.x ;
        _offsetPoint.x += _delta;
    }
    [self setBounds:CGRectMake(_offsetPoint.x,0, self.frame.size.width, self.frame.size.height)];
</pre>

<p>which runs faster and more reliable <br />
And it leaves me another question,<em>How Apple implement the scrollView</em>,since after changing the bounds ,the subviews somehow should alter their position,but the detail is behine the scene</p>

<p>Ref : <br />
<a href="http://www.objc.io/issue-3/scroll-view.html">Understanding Scroll Views</a> <br />
<a href="http://stackoverflow.com/questions/1210047/cocoa-whats-the-difference-between-the-frame-and-the-bounds">Cocoa: What's the Difference between the frame and the bounds?</a></p>
    </section>

  </article>

  <section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'lanston'; // required: replace example with your forum shortname
      

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



            <footer class="footer">
    <span class="footer__copyright">&copy; 2015  All rights reserved.</span>
    <span class="footer__copyright"><a href="https://github.com/onevcat/vno">Vno</a> theme by <a href="http://im.onevcat.com/">@onevcat</a></span>
</footer>        </div>
    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45773367-1', 'auto');
  ga('send', 'pageview');

</script>

    <!-- Compatibility for Ghost 0.7.0: http://dev.ghost.org/no-more-jquery/ -->
    <script type="text/javascript">  
      if (typeof jQuery == 'undefined') {
        document.write('<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></'+'script>');
      }
    </script>
    
    <script type="text/javascript" src="../assets/js/main86b5.js?v=8e02a3de55"></script>

    <script type="text/javascript" src="../assets/js/highlight.pack86b5.js?v=8e02a3de55"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</body>

<!-- Mirrored from localhost:2368/implement-a-simple-scrollview/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 06 Dec 2015 02:44:43 GMT -->
</html>
