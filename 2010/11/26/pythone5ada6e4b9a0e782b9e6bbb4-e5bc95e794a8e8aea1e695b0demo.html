<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>python学习点滴 & 引用计数demo</title>
        <meta name="viewport" content="width=device-width, user-scalable=no">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Lanston Peng's ideas</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>python学习点滴 & 引用计数demo</h2>
<p class="meta">26 Nov 2010</p>

<div class="post">
<p>id()
type()
3种比较类型:
type(L)==type([])
type(L)==list
isinstance(L,list)</p>




<p>对象引用计数   对地址</p>




<pre><code>a=1
b=a
c=[]
c.append(b)
</code></pre>




<p>这里，对象 1 的引用计数为3
del a
b=5
c[0]=9
这里，对象 1 的引用计数为0</p>




<!-- more -->




<p>a = { }         # a 的引用为 1
b = { }         # b 的引用为 1
a['b'] = b              # b 的引用增 1，b的引用为2
b['a'] = a              # a 的引用增 1，a的引用为 2
del a           # a 的引用减 1，a的引用为 1
del b           # b 的引用减 1,  b的引用为 1</p>




<p>在这个例子中,del语句减少了 a 和 b 的引用计数并删除了用于引用的变量名，可是由于两个对象各包含一个对方对象的引用，虽然最后两个对象都无法通过名字访问了，但引用计数并没有减少到零。因此这个对象不会被销毁，它会一直驻留在内存中，这就造成了内存泄漏。为解决这个问题，Python解释器会定期的运行一个搜索器，若发现一个对象已经无法被访问，不论该对象引用计数是否为 0 ，都销毁它。这个搜索器的算法可以通过 gc 模块的函数来进行调整和控制。</p>


</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'lanston'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




          <div class="footer">
            <div class="contact">
              <p>
                I'm Lanston Peng<br />
                An on-the-way Life Hacker<br />
              </p>
            </div>
            <div class="contact">
              <p>
                <a href="https://twitter.com/lanstonpeng">@lanstonpeng</a><br />
                <a href="https://github.com/lanstonpeng">lanstonpeng</a><br />
                <a href="http://www.douban.com/people/lanstonpeng">豆瓣</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
